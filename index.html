<!DOCTYPE html>
<html lang="tr">

<head>
    <title>Participatory Mapping</title>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">

    <!-- CSS -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/leaflet/1.9.3/leaflet.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/leaflet.draw/1.0.4/leaflet.draw.css">
    <link rel="stylesheet" href="style.css">
</head>

<body>
    <!-- Control Buttons -->
    <nav class="buttongroup">
        <div>
            <button id="draw-agac">ğŸŒ³ AÄŸaÃ§</button>
            <button id="draw-bench">ğŸª‘ Bank</button>
            <button id="draw-statue">ğŸ—½ AnÄ±t</button>
        </div>
        <div>
            <button id="draw-cafe">â˜•ï¸ Cafe</button>
            <button id="draw-wc">ğŸš½ WC</button>
            <button id="draw-sport">ğŸ€ Spor</button>
            <button id="draw-culture">ğŸ­ KÃ¼ltÃ¼r</button>
        </div>
        <div style="height: 20px;"></div>
        <div>
            <button id="draw-path">ğŸš¶ğŸ»â€â™‚ï¸ Yaya yolu</button>
            <button id="draw-green">ğŸŸ© YeÅŸil alan</button>
            <button id="draw-square">ğŸŸ¨ Meydan</button>
        </div>
        <div style="height: 20px;"></div>
        <div>
            <button id="undo" class="bitir">â®â® Geri al</button>
            <button id="reset" class="bitir">ğŸ’« Temizle</button>
        </div>
        <div>
            <button id="upload" class="bitir">ğŸ“¤ Bitir ve yÃ¼kle</button>
        </div>
    </nav>

    <div id="consent-modal" class="modal" style="display:none;"> <div class="modal-content">
        <h2>AÃ§Ä±klama ve Bilgilendirilme</h2>
        <p>
            Bu Ã§alÄ±ÅŸma, katÄ±lÄ±mcÄ± web haritalama sÃ¼reÃ§lerinde dijital araÃ§larÄ±n rolÃ¼nÃ¼ ve kullanÄ±cÄ±larÄ±n karÅŸÄ±laÅŸtÄ±ÄŸÄ± potansiyel biliÅŸsel engelleri araÅŸtÄ±rmaktadÄ±r. AmacÄ±mÄ±z, katÄ±lÄ±mcÄ±larÄ±n web tabanlÄ± bir harita arayÃ¼zÃ¼ kullanarak mekÃ¢nsal tasarÄ±m yaptÄ±klarÄ± sÃ¼reÃ§teki etkileÅŸimlerini ve deneyimlerini BiliÅŸsel YÃ¼k Teorisi (CLT) Ã§erÃ§evesinde incelemektir. Ä°stanbul'un tarihi merkezlerinden Sirkeci-EminÃ¶nÃ¼ aksÄ± iÃ§in bir katÄ±lÄ±mcÄ± dijital tasarÄ±m uygulamasÄ± gerÃ§ekleÅŸtirilmektedir.
        </p>
        <p>
            Web tabanlÄ± bir harita arayÃ¼zÃ¼ kullanarak Sirkeci-EminÃ¶nÃ¼ bÃ¶lgesi iÃ§in mekÃ¢nsal tasarÄ±m Ã¶nerileri geliÅŸtirmeniz istenmektedir. ArayÃ¼zdeki araÃ§larÄ± kullanarak alan hakkÄ±ndaki fikirlerinizi haritaya aktarÄ±yor olacaksÄ±nÄ±z. AyrÄ±ca, arayÃ¼zle olan etkileÅŸimleriniz (yakÄ±nlaÅŸtÄ±rma, kaydÄ±rma, araÃ§ kullanÄ±mÄ± vb.) ve gÃ¶rev sonrasÄ± dolduracaÄŸÄ±nÄ±z kÄ±sa bir anket ile deneyiminize dair veriler <strong>anonim olarak, kiÅŸisel bilgiler ele alÄ±nmaksÄ±zÄ±n</strong> toplanacaktÄ±r.
        </p>
        <hr> <h3>BilgilendirilmiÅŸ Onam</h3>
        <ul>
            <li><strong>GÃ¶nÃ¼llÃ¼lÃ¼k:</strong> Bu Ã§alÄ±ÅŸmaya katÄ±lÄ±mÄ±nÄ±z tamamen gÃ¶nÃ¼llÃ¼lÃ¼k esasÄ±na dayanmaktadÄ±r. KatÄ±lmaya karar verdikten sonra bile, herhangi bir hakkÄ±nÄ±zÄ± kaybetmeden veya bir cezaya maruz kalmadan istediÄŸiniz zaman Ã§alÄ±ÅŸmadan ayrÄ±labilirsiniz.</li>
            <li><strong>Gizlilik:</strong> Bu Ã§alÄ±ÅŸmayla baÄŸlantÄ±lÄ± olarak elde edilen her bilgi sizinle Ã¶zdeÅŸleÅŸtirilmeden, anonim olarak gizli tutulacak ve yalnÄ±zca bilimsel amaÃ§larla kullanÄ±lacaktÄ±r. Toplanan tÃ¼m veriler, sÄ±nÄ±rlÄ± eriÅŸime sahip gÃ¼venli ve ÅŸifreli bir veritabanÄ±nda saklanacaktÄ±r.</li>
            <li><strong>OlasÄ± Riskler ve Faydalar:</strong> Ã‡alÄ±ÅŸmanÄ±n bilinen bir riski bulunmamaktadÄ±r. Ã‡alÄ±ÅŸma, katÄ±lÄ±mcÄ± planlama ve dijital katÄ±lÄ±m araÃ§larÄ±nÄ±n geliÅŸtirilmesine katkÄ±da bulunarak toplumsal fayda saÄŸlamayÄ± amaÃ§lamaktadÄ±r.</li>
            <li><strong>Ä°letiÅŸim:</strong> Bu araÅŸtÄ±rma ile ilgili herhangi bir sorunuz veya endiÅŸeniz olursa lÃ¼tfen aÅŸaÄŸÄ±daki araÅŸtÄ±rmacÄ± ile iletiÅŸime geÃ§iniz: <a href="mailto:yilmazali13@itu.edu.tr">AraÅŸ. GÃ¶r. Ali YILMAZ (yilmazali13@itu.edu.tr)</a></li>
        </ul>
        <hr> <p><strong>Onay BeyanÄ±:</strong> YukarÄ±da aÃ§Ä±klanan prosedÃ¼rleri anladÄ±m. SorularÄ±m tatmin edici bir ÅŸekilde yanÄ±tlandÄ±. Ä°stediÄŸim zaman Ã§alÄ±ÅŸmadan ayrÄ±lma hakkÄ±mÄ±n saklÄ± olduÄŸunu bilerek, bu Ã§alÄ±ÅŸmaya gÃ¶nÃ¼llÃ¼ olarak katÄ±lmayÄ± onaylÄ±yorum.</p>

        <button id="consent-agree-btn" type="button">OnaylÄ±yorum</button>
    </div>
    </div>

    <!-- User Modal -->
    <div id="user-modal" class="modal" style="display:none;">
        <div class="modal-content">
            <h2>KatÄ±lÄ±mcÄ±</h2>
            <p>
                Åu anda Sirkeci GarÄ±'ndan EminÃ¶nÃ¼'ne kadar olan hattÄ± keyfinize gÃ¶re tasarlamak Ã¼zeresiniz.
                Bunu katÄ±lÄ±mcÄ± planlama ve tasarÄ±m anlayÄ±ÅŸÄ± ile harmanlanan bir mekÃ¢nsal anket Ã§alÄ±ÅŸmasÄ± olarak
                dÃ¼ÅŸÃ¼nebilirsiniz.
            </p>
            <p>
                Harita Ã¼zerinde bulunan yardÄ±mcÄ± butonlar vasÄ±tasÄ± ile fikirlerinizi haritaya ekleyebilir ve
                hayallerinizin gerÃ§ekleÅŸmesini umabilirsiniz.
                Sizin gibi diÄŸer ziyaretÃ§iler de bu mekÃ¢nsal anketi hayalleri ile dolduruyor ve sonuÃ§larÄ± Matrix'te yer
                alan Ã§ok gÃ¼venli bir sunucuya PTT ile gÃ¶nderiliyor.
            </p>
            <p></p>
            <form id="user-form">
                <div>
                    <label for="username"><strong>Takma isminiz</strong></label>
                    <input type="text" id="username" name="username" placeholder="VatandaÅŸ 2.0" required>
                </div>
                <div>
                    <label for="age"><strong>YaÅŸÄ±nÄ±z</strong></label>
                    <input type="number" id="age" name="age" placeholder="20" required>
                </div>
                <div>
                    <label for="group">Sirkeci-EminÃ¶nÃ¼ ile iliÅŸkiniz</label>
                    <select id="group" name="group">
                        <option value="" selected disabled>SeÃ§iniz</option>
                        <option value="ziyaretÃ§i">ZiyaretÃ§iyim</option>
                        <option value="Ã§alÄ±ÅŸÄ±yor">Ã‡alÄ±ÅŸÄ±yorum</option>
                        <option value="yaÅŸÄ±yor">YaÅŸÄ±yorum</option>
                    </select>
                </div>
                <div>
                    <label for="frequency"><strong>Ziyaret</strong> sÄ±klÄ±ÄŸÄ±nÄ±z</label>
                    <select id="frequency" name="frequency">
                        <option value="" selected disabled>SeÃ§iniz</option>
                        <option value="gÃ¼nlÃ¼k">Her gÃ¼n</option>
                        <option value="haftalÄ±k">Haftada bir veya birkaÃ§ kez</option>
                        <option value="aylÄ±k">Ayda bir veya birkaÃ§ kez</option>
                        <option value="yÄ±llÄ±k">YÄ±lda bir veya birkaÃ§ kez</option>
                        <option value="nadiren">Nadiren</option>
                        <option value="hiÃ§">HiÃ§ ziyaret etmedim</option>
                    </select>
                </div>
                <div>
                    <label for="map-familiarity">GÃ¼ndelik hayatÄ±nÄ±zda <strong>dijital harita</strong> kullanÄ±m sÄ±klÄ±ÄŸÄ±nÄ±z (Google Haritalar, Yandex Haritalar vb.)</label>
                    <select id="map-familiarity" name="map-familiarity">
                        <option value="" selected disabled>SeÃ§iniz</option>
                        <option value="gÃ¼nlÃ¼k">Her gÃ¼n</option>
                        <option value="sÄ±k">SÄ±klÄ±kla</option>
                        <option value="bazen">Bazen</option>
                        <option value="nadiren">Nadiren</option>
                        <option value="hiÃ§">HiÃ§</option>
                    </select>
                </div>
                <div>
                    <label for="gis-familiarity">GÃ¼ndelik veya mesleki hayatÄ±nÄ±zda <strong>CoÄŸrafi Bilgi Sistemlerini (GIS)</strong> kullanÄ±m sÄ±klÄ±ÄŸÄ±nÄ±z (ArcGIS, QGIS vb.)</label>
                    <select id="gis-familiarity" name="gis-familiarity">
                        <option value="" selected disabled>SeÃ§iniz</option>
                        <option value="gÃ¼nlÃ¼k">Her gÃ¼n</option>
                        <option value="sÄ±k">SÄ±klÄ±kla</option>
                        <option value="bazen">Bazen</option>
                        <option value="nadiren">Nadiren</option>
                        <option value="hiÃ§">HiÃ§</option>
                    </select>
                </div>
                <div>
                    <label for="online-participation">Daha Ã¶nce <strong>Ã§evrimiÃ§i katÄ±lÄ±m araÃ§larÄ±</strong>nÄ± kullandÄ±nÄ±z mÄ±? (KabataÅŸ'Ä± tasarla, BÃ¼tÃ§e Senin, Ä°stanbul Senin vb.)</label>
                    <select id="online-participation" name="online-participation">
                        <option value="" selected disabled>SeÃ§iniz</option>
                        <option value="hayÄ±r">HayÄ±r</option>
                        <option value="evet">Evet</option>
                    </select>
                </div>
                <div>
                    <label for="district">YaÅŸadÄ±ÄŸÄ±nÄ±z <strong>ilÃ§e</strong></label>
                    <select id="district" name="district">
                        <option value="" selected disabled>SeÃ§iniz</option>
                    </select>
                </div>
                <div>
                    <label for="neighborhood">YaÅŸadÄ±ÄŸÄ±nÄ±z <strong>mahalle</strong></label>
                    <select id="neighborhood" name="neighborhood" disabled>
                        <option value="">LÃ¼tfen Ã¶nce bir ilÃ§e seÃ§iniz</option>
                    </select>
                </div>
                <!-- **MODAL SONU** -->
                <button id="continue-btn" type="button" onclick="handleSaveAndContinue()">Devam</button>
            </form>
        </div>
    </div>

    <!-- **YENÄ°: Geri Bildirim ModalÄ±** -->
    <div id="nasa-tlx-modal" class="modal" style="display:none;">
        <div class="modal-content nasa-tlx-content"> <h2>ğŸ§  Ä°ÅŸ YÃ¼kÃ¼ DeÄŸerlendirmesi</h2>
            <p>
                <em>LÃ¼tfen az Ã¶nce tamamladÄ±ÄŸÄ±nÄ±z haritalama gÃ¶revini (arayÃ¼zÃ¼ kullanma, Ã§izim yapma, haritada gezinme vb. dahil) dÃ¼ÅŸÃ¼ndÃ¼ÄŸÃ¼nÃ¼zde, aÅŸaÄŸÄ±daki boyutlara gÃ¶re algÄ±ladÄ±ÄŸÄ±nÄ±z iÅŸ yÃ¼kÃ¼nÃ¼ <strong>0 (Ã‡ok DÃ¼ÅŸÃ¼k) ile 100 (Ã‡ok YÃ¼ksek)</strong> arasÄ±nda derecelendiriniz.</em>
            </p>
            <form id="nasa-tlx-form">
                <div class="nasa-dimension">
                    <label for="mental-demand"><strong>Zihinsel Talep:</strong> GÃ¶rev ne kadar zihinsel ve algÄ±sal aktivite gerektirdi? (dÃ¼ÅŸÃ¼nme, karar verme, hatÄ±rlama vb.)</label>
                    <div class="slider-container">
                        <input type="range" id="mental-demand" name="mental-demand" min="0" max="100" step="5" value="50">
                        <span class="slider-value">50</span>
                    </div>
                </div>

                <div class="nasa-dimension">
                    <label for="physical-demand"><strong>Fiziksel Talep:</strong> GÃ¶rev ne kadar fiziksel aktivite gerektirdi? (tÄ±klama, sÃ¼rÃ¼kleme, kaydÄ±rma vb.)</label>
                    <div class="slider-container">
                        <input type="range" id="physical-demand" name="physical-demand" min="0" max="100" step="5" value="50">
                         <span class="slider-value">50</span>
                    </div>
                </div>

                <div class="nasa-dimension">
                    <label for="temporal-demand"><strong>Zamana BaÄŸlÄ± Talep:</strong> GÃ¶revi yaparken ne kadar zaman baskÄ±sÄ± hissettiniz?</label>
                    <div class="slider-container">
                        <input type="range" id="temporal-demand" name="temporal-demand" min="0" max="100" step="5" value="50">
                         <span class="slider-value">50</span>
                    </div>
                </div>

                <div class="nasa-dimension">
                    <label for="performance"><strong>Performans:</strong> GÃ¶revi tamamlamada ne kadar baÅŸarÄ±lÄ± olduÄŸunuzu dÃ¼ÅŸÃ¼nÃ¼yorsunuz?</label>
                    <div class="slider-container">
                        <input type="range" id="performance" name="performance" min="0" max="100" step="5" value="50">
                         <span class="slider-value">50</span>
                    </div>
                </div>

                <div class="nasa-dimension">
                    <label for="effort"><strong>Ã‡aba:</strong> Performans seviyenize ulaÅŸmak iÃ§in ne kadar sÄ±kÄ± Ã§alÄ±ÅŸmak zorunda kaldÄ±nÄ±z? (zihinsel ve fiziksel)</label>
                    <div class="slider-container">
                        <input type="range" id="effort" name="effort" min="0" max="100" step="5" value="50">
                         <span class="slider-value">50</span>
                    </div>
                </div>

                <div class="nasa-dimension">
                    <label for="frustration"><strong>Engellenme:</strong> GÃ¶rev sÄ±rasÄ±nda ne kadar gÃ¼vensiz, cesareti kÄ±rÄ±lmÄ±ÅŸ, rahatsÄ±z veya stresli hissettiniz?</label>
                    <div class="slider-container">
                        <input type="range" id="frustration" name="frustration" min="0" max="100" step="5" value="50">
                         <span class="slider-value">50</span>
                    </div>
                </div>

                <button id="submit-nasa-tlx-btn" type="button">Anketi GÃ¶nder ve YÃ¼kle</button>
            </form>
        </div>
    </div>
    <!-- **MODAL SONU** -->

    <!-- Map Container -->
    <main id="map"></main>

    <!-- Scripts -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/2.0.0/jquery.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/dropbox.js/10.34.0/Dropbox-sdk.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jszip/3.10.1/jszip.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/FileSaver.js/1.3.8/FileSaver.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/leaflet/1.9.3/leaflet.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/leaflet.draw/1.0.4/leaflet.draw.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/leaflet.toolbar.js/0.3.0/leaflet.toolbar.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/tooltip.js/1.3.3/tooltip.js"></script>
    <script src="script.js"></script>

    <script>
        document.querySelectorAll('.slider-container input[type="range"]').forEach(slider => {
            const valueSpan = slider.nextElementSibling; // Span'Ä±n slider'dan hemen sonra geldiÄŸini varsayÄ±yoruz
            // BaÅŸlangÄ±Ã§ deÄŸerini ayarla
            if (valueSpan && valueSpan.classList.contains('slider-value')) {
                 valueSpan.textContent = slider.value;
            }
            // Slider hareket ettikÃ§e deÄŸeri gÃ¼ncelle
            slider.addEventListener('input', (event) => {
                 if (valueSpan && valueSpan.classList.contains('slider-value')) {
                    valueSpan.textContent = event.target.value;
                }
            });
        });
    </script>
</body>

</html>
